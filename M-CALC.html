<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./css/M-CALC-STYLE.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title></title>
</head>
<body>
    <div id="space"></div>
    <div class="container">
        <div id="title">
            <h2>M-CALC|<span>PRO</span></h2>
            <a href="tel:+959767103730">
                <p>?</p>
            </a>
        </div>
        
        <div id="display-container">
            <div id="display"></div>
        </div>
        
        <div id="keys-container">
            <i class="keys" data-key="(">(</i>
            <i class="keys" data-key=")">)</i>
            <i class="keys" data-key="B"><span class="fa fa-arrow-left"></span></i>
            <i class="keys" data-key="=">=</i>
            <i class="keys" data-key="7">7</i>
            <i class="keys" data-key="8">8</i>
            <i class="keys" data-key="9">9</i>
            <i class="keys" data-key="+">+</i>
            <i class="keys" data-key="4">4</i>
            <i class="keys" data-key="5">5</i>
            <i class="keys" data-key="6">6</i>
            <i class="keys" data-key="-">-</i>
            <i class="keys" data-key="1">1</i>
            <i class="keys" data-key="2">2</i>
            <i class="keys" data-key="3">3</i>
            <i class="keys" data-key="×">×</i>
            <i class="keys" data-key="C">C</i>
            <i class="keys" data-key="0">0</i>
            <i class="keys" data-key=".">.</i>
            <i class="keys" data-key="÷">÷</i>
        </div>
    </div>
    <div id="footer">
        <p>Creator : <span>@M-Naw</span></p>
        <p> | </p>
        <p>Date : <span>8-6-2023</span></p>
    </div>
    
<script>

const styleDis = document.getElementById("display").style;
const display = document.querySelector("#display");
const keys = document.querySelectorAll(".keys");

display.textContent = 0;

for (const key of keys) {
    key.addEventListener("click", (e) => {
        let k = key.dataset.key;

        switch (k) {
            case ".":
                if (display.textContent.endsWith("0")) {
                    display.textContent += k;
                } else if (display.textContent.endsWith("+") || display.textContent.endsWith("-") || display.textContent.endsWith("×") || display.textContent.endsWith("÷")) {
                    display.textContent += "0" + k;
                } else if (display.textContent.endsWith(".") || display.textContent.endsWith("(") || display.textContent.endsWith(")")) {
                    display.textContent = display.textContent;
                } else {
                    display.textContent += k;
                }

                break;
            case "+":
                if (display.textContent.endsWith("÷") || display.textContent.endsWith("×") || display.textContent.endsWith("-") || display.textContent.endsWith("+") || display.textContent.endsWith(".") || display.textContent.endsWith("(")) {
                    display.textContent = display.textContent;
                } else {
                    display.textContent += k;
                }

                break;
            case "-":
                if (display.textContent.endsWith("÷") || display.textContent.endsWith("×") || display.textContent.endsWith("-") || display.textContent.endsWith("+") || display.textContent.endsWith(".") || display.textContent.endsWith("(")) {
                    display.textContent = display.textContent;
                } else {
                    display.textContent += k;
                }

                break;
            case "×":
                if (display.textContent.endsWith("÷") || display.textContent.endsWith("×") || display.textContent.endsWith("-") || display.textContent.endsWith("+") || display.textContent.endsWith(".") || display.textContent.endsWith("(")) {
                    display.textContent = display.textContent;
                } else {
                    display.textContent += k;
                }

                break;
            case "÷":
                if (display.textContent.endsWith("÷") || display.textContent.endsWith("×") || display.textContent.endsWith("-") || display.textContent.endsWith("+") || display.textContent.endsWith(".") || display.textContent.endsWith("(")) {
                    display.textContent = display.textContent;
                } else {
                    display.textContent += k;
                }

                break;
            case "(":
                num = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];

                if (
                    display.textContent.endsWith(num[0]) ||
                    display.textContent.endsWith(num[1]) ||
                    display.textContent.endsWith(num[2]) ||
                    display.textContent.endsWith(num[3]) ||
                    display.textContent.endsWith(num[4]) ||
                    display.textContent.endsWith(num[5]) ||
                    display.textContent.endsWith(num[6]) ||
                    display.textContent.endsWith(num[7]) ||
                    display.textContent.endsWith(num[8]) ||
                    display.textContent.endsWith(num[9]) ||
                    display.textContent.endsWith("(") ||
                    display.textContent.endsWith(")") ||
                    display.textContent.endsWith(".")
                ) {
                    display.textContent = display.textContent;
                } else {
                    display.textContent += k;
                }

                break;
            case ")":

                if (
                    display.textContent.endsWith("÷") ||
                    display.textContent.endsWith("×") ||
                    display.textContent.endsWith("-") ||
                    display.textContent.endsWith("+") ||
                    display.textContent.endsWith("(") ||
                    display.textContent.endsWith(")") ||
                    display.textContent.endsWith(".") ) 
                {
                    display.textContent = display.textContent;
                } else if (display.textContent.startsWith(0) && display.textContent.endsWith(0)) {
                    display.textContent = display.textContent;
                } else {
                    display.textContent += k;
                }

                break;

            case "=":
                var ChangeToJs = display.textContent.replace("×", "*").replace("÷", "/");

                display.textContent = eval(ChangeToJs);
                break;
            case "B":
                var split = display.textContent.split("");
                var len = display.textContent.length - 1;
                var output = split.slice(0, len).join("");
                if (len != 0) {
                    display.textContent = output;
                } else {
                    display.textContent = 0;
                }

                break;
            case "C":
                display.textContent = 0;
                break;
            default:
                if (display.textContent.startsWith(0) && display.textContent.endsWith(0)) {
                    display.textContent = k;
                } else if (display.textContent.endsWith("0.")) {
                    display.textContent += k;
                } else if (display.textContent.endsWith(")")) {
                    display.textContent = display.textContent;
                }else {
                    display.textContent += k;
                }
        }
        changeWidth();
    });
}

function changeWidth(){
    var disWidth = display.clientWidth;
    
    if (disWidth > 245){
        var getWidth = disWidth - 245 ;
        styleDis.marginLeft = -getWidth + "px";
    }
}

</script>

</body>
</html>